/*! Angular Google Maps 0.1.6 (2014-03-12) | Egor Khmelev <hmelyoff@gmail.com> | MIT license */

(function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};!function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;return u=a.module("ngMaps",[]),v=a.injector(["ng"]),d=v.get("$document"),g=v.get("$window"),f=v.get("$q"),s=f.defer(),w="google-maps-api",x="//maps.googleapis.com/maps/api/js?sensor=false&language=en&callback=ngMapsAsync",p=null,t=[],r={},q={},g.ngMapsAsync=function(){var c;return c=g.google.maps,q.Marker=function(c){function d(a){this.$element=a.element,this.$element.css({position:"absolute"}),this.$position=a.position,this.$$anchor=a.anchor,this.$events=["dblclick"],this.$preventEvent=function(a){return a.stopPropagation()}}return b(d,c),d.prototype.onAdd=function(){var a,b,c,d,e,f;for(b=this.getPanes(),b.overlayImage.appendChild(this.$element[0]),e=this.$events,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(this.$element.on(a,this.$preventEvent));return f},d.prototype.onRemove=function(){return this.$element.remove()},d.prototype.setPosition=function(a){return this.$position=a,this.draw()},d.prototype.getPosition=function(){return this.$position},d.prototype.draw=function(){var b,c,d,e,f;return e=this.getProjection(),this.$position&&e?(f=this.$element.outerWidth(),c=this.$element.outerHeight(),b=a.extend({x:0,y:0},this.$$anchor(f,c)),d=e.fromLatLngToDivPixel(this.$position),d.x=Math.round(d.x-b.x),d.y=Math.round(d.y-b.y),this.$element.css({left:d.x,top:d.y})):void 0},d}(c.OverlayView),q.Window=function(d){function e(b){this.$element=a.element("<div>").append(b.content),this.$element.css({position:"absolute"}),this.$position=b.position,this.$shouldPan=b.pan||!1,this.$$offset=b.offset,this.$events=["mousedown","mousemove","mouseover","mouseout","mouseup","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","dblclick","contextmenu","click"],this.$preventEvent=function(a){return a.stopPropagation()},this.$panned=!1}return b(e,d),e.prototype.onAdd=function(){var a,b,c,d,e,f;for(b=this.getPanes(),b.floatPane.appendChild(this.$element[0]),e=this.$events,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(this.$element.on(a,this.$preventEvent));return f},e.prototype.onRemove=function(){var a,b,c,d,e;for(this.$element.remove(),d=this.$events,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.$element.off(a,this.$preventEvent));return e},e.prototype.setPosition=function(a){return this.$position=a,this.draw()},e.prototype.open=function(a){return this.setMap(a)},e.prototype.close=function(){return this.setMap(null),this.$panned=!1},e.prototype.getPosition=function(){return this.$position},e.prototype.draw=function(){var b,d,e,f,g,h,i,j,k;return i=this.getProjection(),this.$position&&i&&(k=this.$element.width(),d=this.$element.height(),g=a.extend({x:0,y:0},this.$$offset(k,d)),e=this.getMap(),h=i.fromLatLngToDivPixel(this.$position),h.x=Math.round(h.x+g.x),h.y=Math.round(h.y+g.y),this.$element.css({left:h.x,top:h.y}),!this.$panned&&this.$shouldPan)?(b=e.getBounds(),j=i.fromDivPixelToLatLng(new c.Point(h.x,h.y+d+20)),f=i.fromDivPixelToLatLng(new c.Point(h.x+k+20,h.y-20)),b.contains(f)&&b.contains(j)||e.panToBounds(new c.LatLngBounds(j,f)),this.$panned=!0):void 0},e}(c.OverlayView),s.resolve(c)},e=function(){var a;return d[0].getElementById(w)||(p&&(x+="&key="+p),t.length&&(x+="&libraries="+t.join(",")),a=d[0].createElement("script"),a.id=w,a.type="text/javascript",a.src=x,d[0].body.appendChild(a)),s.promise},o=function(){this.key=function(a){return p=a,this},this.lib=function(a){return t.push(a),this},this.options=function(a){return r=a},this.$get=function(){return e()}},i=function(a){a.$ngMap=this,this.map=null,this.center=null,this.zoom=null,this.bounds=null},j=function(b,c,d){return{restrict:"ACE",controller:["$scope","$timeout",i],scope:!0,transclude:!0,link:function(f,g,h,i,j){var k,l,m,n;return k=a.element(d),n=a.element("<div>").hide(),m="ng-map-loading",g.addClass(m),l=function(a){var b;return b=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().split("-"),b.shift(),b.length?b.join("_"):void 0},e().then(function(d){var e,o,p,q,s,t,u,v,w;i.api=d,i.api.visualRefresh=!0,u=a.extend({},r,b(h.options)(f)),g.removeClass(m),i.map=new i.api.Map(g[0],u),t=function(){var a;return a=new i.api.LatLng(i.center.lat,i.center.lng),i.api.event.trigger(i.map,"resize"),i.map.panTo(a)},k.on("resize",t),f.$on("$ngMap:resize",t),s=[];for(q in h)v=h[q],0===q.indexOf("event")&&(p=l(q))&&!function(a,d){var e,g;return e="addListener","ready"===p&&(p="idle",e="addListenerOnce"),g=i.api.event[e](i.map,p,function(a){var e;return e={},a&&(e.$event=a),c(function(){return b(d)(f,e)})}),s.push(g)}(q,v);return o=i.map.addListener("center_changed",function(){var a;return a=i.map.getCenter(),c(function(){return i.center={lat:a.lat(),lng:a.lng()}})}),w=i.map.addListener("zoom_changed",function(){return c(function(){return i.zoom=i.map.getZoom()})}),e=i.map.addListener("bounds_changed",function(){var a,b,d;return a=i.map.getBounds(),b=a.getNorthEast(),d=a.getSouthWest(),c(function(){return i.bounds={ne:{lat:b.lat(),lng:b.lng()},sw:{lat:d.lat(),lng:d.lng()}}})}),f.$on("$destroy",function(){var a,b,c,d;for(k.off("resize",t),i.api.event.removeListener(o),i.api.event.removeListener(w),i.api.event.removeListener(e),d=[],b=0,c=s.length;c>b;b++)a=s[b],d.push(i.api.event.removeListener(a));return d}),c(function(){return j(f,function(a){return n.append(a),g.append(n)})})})}}},h=function(){return{restrict:"ACE",require:"^ngMap",scope:{lat:"=lat",lng:"=lng"},link:function(a,b,c,d){return a.$watch(function(){return{lat:a.lat,lng:a.lng}},function(a){return a.lat&&a.lng?d.map.setCenter(new d.api.LatLng(a.lat,a.lng)):void 0},!0)}}},n=function(){return{restrict:"ACE",require:"^ngMap",scope:{zoom:"=value"},link:function(a,b,c,d){return a.$watch("zoom",function(a){return a?d.map.setZoom(a):void 0})}}},k=function(){return{restrict:"ACE",require:"^ngMap",scope:{bounds:"=bounds"},link:function(a,b,c,d){return a.$watch("bounds",function(a){return a?d.map.fitBounds(a):void 0})}}},m=function(a){return{restrict:"ACE",require:"^ngMap",scope:!0,link:function(b,c,d,e){var f,g,h,i,j,k,l,m,n,o;return h=c.contents(),n=h.filter("*"),k=n.length>0,f={scope:b},g="{x: $width / 2, y: $height / 2}",j=function(c,e){return(d.anchor&&a(d.anchor)||a(g))(b,{$width:c,$height:e})},i=function(){var a;return a=null,a=k>0?new q.Marker({element:n.first(),anchor:j}):new e.api.Marker},l=a(d.lat),m=a(d.lng),o=b.$watch(function(){return{lat:l(b),lng:m(b)}},function(c){var g;return g=!!f.marker,f.marker||(f.marker=i()),f.marker.setPosition(new e.api.LatLng(c.lat,c.lng)),f.marker.setMap(e.map),b.$marker=f.marker,!g&&"onAdd"in d?a(d.onAdd)(b):void 0},!0),b.$on("$destroy",function(){return o(),f.marker.setMap(null),"onRemove"in d?a(d.onRemove)(b):void 0})}}},l=function(b,c){return{restrict:"ACE",require:"^ngMap",transclude:!0,link:function(d,e,f,g,h){var i,j,k,l;return k=[],l=c(f.pan)(d)||!1,i="{x: -$width / 2, y: -$height - 30}",j=function(a,b){return(f.offset&&c(f.offset)||c(i))(d,{$width:a,$height:b})},g[f.name||"infoWindow"]=function(c,e,f){var i;return null==f&&(f={}),i={scope:a.extend(d.$new(),f)},i.customWindow=new q.Window({position:new g.api.LatLng(c,e),content:h(i.scope,a.noop),pan:l,offset:j}),i.scope.$on("$destroy",function(){return i.customWindow.close()}),b(function(){return i.customWindow.open(g.map)}),i}}}},c=function(b){var c;return c=function(a,b){return{tc:b.TOP_CENTER,tl:b.TOP_LEFT,tr:b.TOP_RIGHT,lt:b.LEFT_TOP,rt:b.RIGHT_TOP,lc:b.LEFT_CENTER,rc:b.RIGHT_CENTER,lb:b.LEFT_BOTTOM,rb:b.RIGHT_BOTTOM,bc:b.BOTTOM_CENTER,bl:b.BOTTOM_LEFT,br:b.BOTTOM_RIGHT}[a]},[function(){return{restrict:"ACE",require:"^ngMap",transclude:!0,scope:!0,link:function(d,e,f,g,h){var i;return i=a.element("<div>").append(h()),g.map.controls[c(b,g.api.ControlPosition)].push(i[0])}}}]},u.provider("$ngMaps",[o]).directive("ngMap",["$parse","$timeout","$window",j]).directive("ngMapCenter",["$timeout",h]).directive("ngMapZoom",["$timeout",n]).directive("ngMapFit",["$timeout",k]).directive("ngMapMarker",["$parse",m]).directive("ngMapLayer",["$timeout","$parse",l]).directive("ngMapTc",c("tc")).directive("ngMapTl",c("tl")).directive("ngMapTr",c("tr")).directive("ngMapLt",c("lt")).directive("ngMapRt",c("rt")).directive("ngMapLc",c("lc")).directive("ngMapRc",c("rc")).directive("ngMapLb",c("lb")).directive("ngMapRb",c("rb")).directive("ngMapBc",c("bc")).directive("ngMapBl",c("bl")).directive("ngMapBr",c("br"))}(window.angular)}).call(this);
//# sourceMappingURL=angular-maps.min.map