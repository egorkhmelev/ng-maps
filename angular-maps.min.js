/*! Angular Google Maps 0.1.9 (2014-06-04) | Egor Khmelev <hmelyoff@gmail.com> | MIT license */

(function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};!function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;return w=a.module("ngMaps",[]),x=a.injector(["ng"]),d=x.get("$document"),g=x.get("$window"),f=x.get("$q"),t=f.defer(),y="google-maps-api",z="//maps.googleapis.com/maps/api/js?sensor=false&language=en&callback=ngMapsAsync",q=null,u=[],s={},r={},v=function(a){var b;return b=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().split("-"),b.shift(),b.length?b.join("_"):void 0},g.ngMapsAsync=function(){var c;return c=g.google.maps,r.Marker=function(d){function e(a){var b,c,d,e,f;for(c=this,this.$element=a.element,this.$element.css({position:"absolute"}),this.$position=a.position,this.$$anchor=a.anchor,this.$events=["dblclick"],this.$preventEvent=function(a){return a.stopPropagation()},f=this.$events,d=0,e=f.length;e>d;d++)b=f[d],this.$element.on(b,this.$preventEvent)}return b(e,d),e.prototype.setMap=function(a){return this.getMap()!==a?e.__super__.setMap.call(this,a):void 0},e.prototype.onAdd=function(){var a;return a=this.getPanes(),a.overlayImage.appendChild(this.$element[0]),this.$element.hide()},e.prototype.onRemove=function(){return this.$element.remove()},e.prototype.setPosition=function(a){return this.$position=a,this.draw()},e.prototype.getPosition=function(){return this.$position},e.prototype.getAnchor=function(){var b,c;return c=this.$element.outerWidth(),b=this.$element.outerHeight(),a.extend({x:0,y:0},this.$$anchor(c,b))},e.prototype.setDraggable=function(b){return b?this.$element.on("mousedown",a.bind(this,this._startDrag)):this.$element.off("mousedown",this._startDrag)},e.prototype.draw=function(){var a,b,c;return c=this.getProjection(),this.$position&&c&&(a=this.getAnchor(),b=c.fromLatLngToDivPixel(this.$position),b.x=Math.round(b.x-a.x),b.y=Math.round(b.y-a.y),b.x&&b.y)?this.$element.css({left:b.x,top:b.y}).show():void 0},e.prototype._getPoint=function(){var a;return a=this.$element.position(),new c.Point(a.left,a.top)},e.prototype._getEvent=function(a,b){var d,e,f,g;return d=this.getAnchor(),g=this.getProjection(),e=new c.Point(b.x+d.x,b.y+d.y),f=g.fromDivPixelToLatLng(e),{originalEvent:a,position:f,defaultPrevented:!1,preventDefault:function(){return this.defaultPrevented=!0}}},e.prototype._startDrag=function(b){var d,e,f,h;return b.preventDefault(),c.event.trigger(this,"dragstart",e=this._getEvent(b,this._getPoint())),e.defaultPrevented?void 0:(d={origin:b,originPoint:this._getPoint(),listeners:[]},h=a.bind(this,this._drag,d),f=a.bind(this,this._endDrag,d),this.$element[0].setCapture?(this.$element[0].setCapture(!0),d.listeners.push(c.event.addDomListener(this.$element[0],"mousemove",h)),d.listeners.push(c.event.addDomListener(this.$element[0],"mouseup",f))):(d.listeners.push(c.event.addDomListener(g,"mousemove",h)),d.listeners.push(c.event.addDomListener(g,"mouseup",f))))},e.prototype._drag=function(a,b){var d,e,f,g,h;return b.preventDefault(),e=b.clientX-a.origin.clientX,f=b.clientY-a.origin.clientY,g=new c.Point(a.originPoint.x+e,a.originPoint.y+f),d=this._getEvent(b,g),h=d.position,c.event.trigger(this,"drag",d),d.defaultPrevented?void 0:this.setPosition(h)},e.prototype._endDrag=function(a,b){var d,e,f,g,h;for(c.event.trigger(this,"dragend",d=this._getEvent(b,this._getPoint())),h=a.listeners,f=0,g=h.length;g>f;f++)e=h[f],c.event.removeListener(e);return this.$element[0].releaseCapture?this.$element[0].releaseCapture():void 0},e}(c.OverlayView),r.Window=function(d){function e(b){this.$element=a.element("<div>").append(b.content),this.$element.css({position:"absolute"}),this.$position=b.position,this.$shouldPan=b.pan||!1,this.$$offset=b.offset,this.$events=["mousedown","mousemove","mouseover","mouseout","mouseup","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","dblclick","contextmenu","click"],this.$preventEvent=function(a){return a.stopPropagation()},this.$panned=!1}return b(e,d),e.prototype.onAdd=function(){var a,b,c,d,e,f;for(b=this.getPanes(),b.floatPane.appendChild(this.$element[0]),e=this.$events,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(this.$element.on(a,this.$preventEvent));return f},e.prototype.onRemove=function(){var a,b,c,d,e;for(this.$element.remove(),d=this.$events,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.$element.off(a,this.$preventEvent));return e},e.prototype.setPosition=function(a){return this.$position=a,this.draw()},e.prototype.open=function(a){return this.setMap(a)},e.prototype.close=function(){return this.setMap(null),this.$panned=!1},e.prototype.getPosition=function(){return this.$position},e.prototype.draw=function(){var b,d,e,f,g,h,i,j,k;return i=this.getProjection(),this.$position&&i&&(k=this.$element.width(),d=this.$element.height(),g=a.extend({x:0,y:0},this.$$offset(k,d)),e=this.getMap(),h=i.fromLatLngToDivPixel(this.$position),h.x=Math.round(h.x+g.x),h.y=Math.round(h.y+g.y),this.$element.css({left:h.x,top:h.y}),!this.$panned&&this.$shouldPan)?(b=e.getBounds(),j=i.fromDivPixelToLatLng(new c.Point(h.x,h.y+d+20)),f=i.fromDivPixelToLatLng(new c.Point(h.x+k+20,h.y-20)),b.contains(f)&&b.contains(j)||e.panToBounds(new c.LatLngBounds(j,f)),this.$panned=!0):void 0},e}(c.OverlayView),t.resolve(c)},e=function(){var a;return d[0].getElementById(y)||(q&&(z+="&key="+q),u.length&&(z+="&libraries="+u.join(",")),a=d[0].createElement("script"),a.id=y,a.type="text/javascript",a.src=z,d[0].body.appendChild(a)),t.promise},p=function(){this.key=function(a){return q=a,this},this.lib=function(a){return u.push(a),this},this.options=function(a){return s=a},this.$get=function(){return e()}},i=function(a){a.$ngMap=this,this.map=null,this.center=null,this.zoom=null,this.bounds=null},j=function(b,c,d){return{restrict:"ACE",controller:["$scope","$timeout",i],scope:!0,transclude:!0,link:function(f,g,h,i,j){var k,l,m;return k=a.element(d),m=a.element("<div>").hide(),l="ng-map-loading",g.addClass(l),e().then(function(d){var e,n,o,p,q,r,t,u,w;i.api=d,i.api.visualRefresh=!0,t=a.extend({},s,b(h.options)(f)),g.removeClass(l),i.map=new i.api.Map(g[0],t),r=function(){var a;return a=new i.api.LatLng(i.center.lat,i.center.lng),i.api.event.trigger(i.map,"resize"),i.map.panTo(a)},k.on("resize",r),f.$on("$ngMap:resize",r),q=[];for(p in h)u=h[p],0===p.indexOf("event")&&(o=v(p))&&!function(a,d){var e,g;return e="addListener","ready"===o&&(o="idle",e="addListenerOnce"),g=i.api.event[e](i.map,o,function(a){var e;return e={},a&&(e.$event=a),c(function(){return b(d)(f,e)})}),q.push(g)}(p,u);return n=i.map.addListener("center_changed",function(){var a;return a=i.map.getCenter(),c(function(){return i.center={lat:a.lat(),lng:a.lng()}})}),w=i.map.addListener("zoom_changed",function(){return c(function(){return i.zoom=i.map.getZoom()})}),e=i.map.addListener("bounds_changed",function(){var a,b,d;return a=i.map.getBounds(),b=a.getNorthEast(),d=a.getSouthWest(),c(function(){return i.bounds={ne:{lat:b.lat(),lng:b.lng()},sw:{lat:d.lat(),lng:d.lng()}}})}),f.$on("$destroy",function(){var a,b,c,d;for(k.off("resize",r),i.api.event.removeListener(n),i.api.event.removeListener(w),i.api.event.removeListener(e),d=[],b=0,c=q.length;c>b;b++)a=q[b],d.push(i.api.event.removeListener(a));return d}),c(function(){return j(f,function(a){return m.append(a),g.append(m)})})})}}},h=function(){return{restrict:"ACE",require:"^ngMap",scope:{lat:"=lat",lng:"=lng"},link:function(a,b,c,d){return a.$watch(function(){return{lat:a.lat,lng:a.lng}},function(a){return a.lat&&a.lng?d.map.setCenter(new d.api.LatLng(a.lat,a.lng)):void 0},!0)}}},o=function(){return{restrict:"ACE",require:"^ngMap",scope:{zoom:"=value"},link:function(a,b,c,d){return a.$watch("zoom",function(a){return a?d.map.setZoom(a):void 0})}}},k=function(){return{restrict:"ACE",require:"^ngMap",scope:{bounds:"=bounds"},link:function(a,b,c,d){return a.$watch("bounds",function(a){return a?d.map.fitBounds(a):void 0})}}},m=function(a,b){return{restrict:"ACE",require:"^ngMap",scope:!0,link:function(c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,s,t;return i=d.contents(),p=i.filter("*"),m=p.length>0,h="{x: $width / 2, y: $height / 2}",l=function(b,d){return(e.anchor&&a(e.anchor)||a(h))(c,{$width:b,$height:d})},j=function(){var d,g,h,i,j;if(h=null,m>0){h=new r.Marker({element:p.first(),anchor:l}),i=[];for(g in e)j=e[g],0===g.indexOf("event")&&(d=v(g))&&!function(b,e){var g;return g=f.api.event.addListener(h,d,function(b){var d;return d={},b&&(d.$event=b),d.$marker=h,a(e)(c,d)}),i.push(g)}(g,j);i.push(f.api.event.addListener(h,"dragstart",function(){return b(function(){return c.$dragging=!0})})),i.push(f.api.event.addListener(h,"dragend",function(){return b(function(){return c.$dragging=!1})}))}else h=new f.api.Marker;return h},g={scope:c,marker:j()},c.$marker=g.marker,n=a(e.lat),o=a(e.lng),k=a(e.draggable),q=!0,s=c.$watch(function(){return{lat:n(c),lng:o(c)}},function(b){return g.marker.setPosition(new f.api.LatLng(b.lat,b.lng)),g.marker.setMap(f.map),q&&"onAdd"in e&&a(e.onAdd)(c),q=!1},!0),t=c.$watch(function(){return k(c)},function(a){return g.marker.setDraggable(a)}),c.$on("$destroy",function(){return s(),t(),g.marker.setMap(null),"onRemove"in e?a(e.onRemove)(c):void 0})}}},l=function(b,c){return{restrict:"ACE",require:"^ngMap",transclude:!0,link:function(d,e,f,g,h){var i,j,k,l;return k=[],l=c(f.pan)(d)||!1,i="{x: -$width / 2, y: -$height - 30}",j=function(a,b){return(f.offset&&c(f.offset)||c(i))(d,{$width:a,$height:b})},g[f.name||"infoWindow"]=function(c,e,f){var i;return null==f&&(f={}),i={scope:a.extend(d.$new(),f)},i.customWindow=new r.Window({position:new g.api.LatLng(c,e),content:h(i.scope,a.noop),pan:l,offset:j}),i.scope.$on("$destroy",function(){return i.customWindow.close()}),b(function(){return i.customWindow.open(g.map)}),i}}}},n=function(){return{restrict:"ACE",require:"^ngMap",scope:{path:"=path",color:"=color",opacity:"=opacity",weight:"=weight"},link:function(a,b,c,d){var e;return e=new d.api.Polyline,e.setMap(d.map),a.$watch("path",function(a){var b,c,f,g;for(null==a&&(a=[]),c=[],f=0,g=a.length;g>f;f++)b=a[f],c.push(new d.api.LatLng(b[0],b[1]));return e.setPath(c)},!0),a.$watch(function(){return{strokeColor:a.color||"#FF0000",strokeOpacity:a.opacity||1,strokeWeight:a.weight||1}},function(a){return e.setOptions(a)},!0),a.$on("$destroy",function(){return e.setMap(null)})}}},c=function(b){var c;return c=function(a,b){return{tc:b.TOP_CENTER,tl:b.TOP_LEFT,tr:b.TOP_RIGHT,lt:b.LEFT_TOP,rt:b.RIGHT_TOP,lc:b.LEFT_CENTER,rc:b.RIGHT_CENTER,lb:b.LEFT_BOTTOM,rb:b.RIGHT_BOTTOM,bc:b.BOTTOM_CENTER,bl:b.BOTTOM_LEFT,br:b.BOTTOM_RIGHT}[a]},[function(){return{restrict:"ACE",require:"^ngMap",transclude:!0,scope:!0,link:function(d,e,f,g,h){var i;return i=a.element("<div>").append(h()),g.map.controls[c(b,g.api.ControlPosition)].push(i[0])}}}]},w.provider("$ngMaps",[p]).directive("ngMap",["$parse","$timeout","$window",j]).directive("ngMapCenter",["$timeout",h]).directive("ngMapZoom",["$timeout",o]).directive("ngMapFit",["$timeout",k]).directive("ngMapMarker",["$parse","$timeout",m]).directive("ngMapLayer",["$timeout","$parse",l]).directive("ngMapPolyline",[n]).directive("ngMapTc",c("tc")).directive("ngMapTl",c("tl")).directive("ngMapTr",c("tr")).directive("ngMapLt",c("lt")).directive("ngMapRt",c("rt")).directive("ngMapLc",c("lc")).directive("ngMapRc",c("rc")).directive("ngMapLb",c("lb")).directive("ngMapRb",c("rb")).directive("ngMapBc",c("bc")).directive("ngMapBl",c("bl")).directive("ngMapBr",c("br"))}(window.angular)}).call(this);
//# sourceMappingURL=angular-maps.min.map