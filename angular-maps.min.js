/*! Angular Google Maps 0.0.2 (2014-02-08) | Egor Khmelev <hmelyoff@gmail.com> | MIT license */

(function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};!function(a){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;return t=a.module("ngMaps",[]),u=a.injector(["ng"]),d=u.get("$document"),g=u.get("$window"),f=u.get("$q"),r=f.defer(),v="google-maps-api",w="//maps.googleapis.com/maps/api/js?sensor=false&language=en&callback=ngMapsAsync",o=null,s=[],q={},p={},g.ngMapsAsync=function(){var c;return c=g.google.maps,p.Marker=function(a){function c(a){this.$element=a.element,this.$element.css({position:"absolute"}),this.$position=a.position,this.$events=["dblclick"],this.$preventEvent=function(a){return a.stopPropagation()}}return b(c,a),c.prototype.onAdd=function(){var a,b,c,d,e,f;for(b=this.getPanes(),b.overlayImage.appendChild(this.$element[0]),e=this.$events,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(this.$element.on(a,this.$preventEvent));return f},c.prototype.onRemove=function(){return this.$element.remove()},c.prototype.setPosition=function(a){return this.$position=a,this.draw()},c.prototype.getPosition=function(){return this.$position},c.prototype.draw=function(){var a,b,c,d;return c=this.getProjection(),this.$position&&c?(d=this.$element.width(),a=this.$element.height(),b=c.fromLatLngToDivPixel(this.$position),b.x=Math.round(b.x-d/2),b.y=Math.round(b.y-a/2),this.$element.css({left:b.x,top:b.y})):void 0},c}(c.OverlayView),p.Window=function(d){function e(b){this.$element=a.element("<div>").addClass("ng-map-window").append(b.content),this.$element.css({position:"absolute"}),this.$position=b.position,this.$shouldPan=b.pan||!1,this.$events=["mousedown","mousemove","mouseover","mouseout","mouseup","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","dblclick","contextmenu","click"],this.$preventEvent=function(a){return a.stopPropagation()},this.$panned=!1}return b(e,d),e.prototype.onAdd=function(){var a,b,c,d,e,f;for(b=this.getPanes(),b.floatPane.appendChild(this.$element[0]),e=this.$events,f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(this.$element.on(a,this.$preventEvent));return f},e.prototype.onRemove=function(){var a,b,c,d,e;for(this.$element.remove(),d=this.$events,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.$element.off(a,this.$preventEvent));return e},e.prototype.setPosition=function(a){return this.$position=a,this.draw()},e.prototype.open=function(a){return this.setMap(a)},e.prototype.close=function(){return this.setMap(null),this.$panned=!1},e.prototype.getPosition=function(){return this.$position},e.prototype.draw=function(){var a,b,d,e,f,g,h,i;return g=this.getProjection(),this.$position&&g&&(i=this.$element.width(),b=this.$element.height(),d=this.getMap(),f=g.fromLatLngToDivPixel(this.$position),f.x=Math.round(f.x-i/2),f.y=Math.round(f.y-b-30),this.$element.css({left:f.x,top:f.y}),!this.$panned&&this.$shouldPan)?(a=d.getBounds(),h=g.fromDivPixelToLatLng(new c.Point(f.x,f.y+b+20)),e=g.fromDivPixelToLatLng(new c.Point(f.x+i+20,f.y-20)),a.contains(e)&&a.contains(h)||d.panToBounds(new c.LatLngBounds(h,e)),this.$panned=!0):void 0},e}(c.OverlayView),r.resolve(c)},e=function(){var a;return d[0].getElementById(v)||(o&&(w+="&key="+o),s.length&&(w+="&libraries="+s.join(",")),a=d[0].createElement("script"),a.id=v,a.type="text/javascript",a.src=w,d[0].body.appendChild(a)),r.promise},n=function(){this.key=function(a){return o=a,this},this.lib=function(a){return s.push(a),this},this.options=function(a){return q=a},this.$get=function(){return e()}},i=function(a){this.map=null,this.center=null,this.zoom=null,this.bounds=null,this.$$markers=[],this.addMarker=function(a){return function(b){return b?a.$$markers.push(b):void 0}}(this),this.removeMarker=function(a){return function(b){var c;if(b)return c=a.$$markers.indexOf(b),-1!==c?a.$$markers.splice(c,1):void 0}}(this),a.$ngMap=this},j=function(b,c){return{restrict:"ACE",controller:["$scope","$timeout",i],scope:!0,transclude:!0,link:function(d,f,g,h,i){var j,k,l;return l=a.element("<div>").hide(),k="ng-map-loading",f.addClass(k),j=function(a){var b;return b=a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().split("-"),b.shift(),b.length?b.join("_"):void 0},e().then(function(e){var m,n,o,p;h.api=e,h.api.visualRefresh=!0,o=a.extend({},q,b(g.options)(d)),f.removeClass(k),h.map=new h.api.Map(f[0],o);for(n in g)p=g[n],0===n.indexOf("event")&&(m=j(n))&&!function(a,e){return h.map.addListener(m,function(a){var f;return f={},a&&(f.$event=a),c(function(){return b(e)(d,f)})})}(n,p);return c(function(){return i(d,function(a){return l.append(a),f.append(l)})})})}}},h=function(a){return{restrict:"ACE",require:["^ngMap","?ngModel"],scope:{lat:"=lat",lng:"=lng"},link:function(b,c,d,e){var f,g,h,i;return h=e[0],i=e[1],b.$watch(function(){return{lat:b.lat,lng:b.lng}},function(a){return a.lat&&a.lng?h.map.setCenter(new h.api.LatLng(a.lat,a.lng)):void 0},!0),g=h.map.addListener("center_changed",function(){var b;return b=h.map.getCenter(),a(function(){return h.center={lat:b.lat(),lng:b.lng()}})}),f=h.map.addListener("bounds_changed",function(){var b,c,d;return b=h.map.getBounds(),c=b.getNorthEast(),d=b.getSouthWest(),a(function(){return h.bounds={ne:{lat:c.lat(),lng:c.lng()},sw:{lat:d.lat(),lng:d.lng()}}})}),b.$on("$destroy",function(){return h.api.event.removeListener(g),h.api.event.removeListener(f)})}}},m=function(a){return{restrict:"ACE",require:["^ngMap","?ngModel"],scope:{zoom:"=value"},link:function(b,c,d,e){var f,g,h;return f=e[0],g=e[1],b.$watch("zoom",function(a){return a?f.map.setZoom(a):void 0}),h=f.map.addListener("zoom_changed",function(){return a(function(){return f.zoom=f.map.getZoom()})}),b.$on("$destroy",function(){return f.api.event.removeListener(h)})}}},l=function(a){return{restrict:"ACE",require:["^ngMap","?ngModel"],scope:!0,link:function(b,c,d,e){var f,g,h,i,j,k,l,m,n,o;return m=e[0],n=e[1],g=c.contents(),l=g.filter("*"),i=l.length>0,f={scope:b},h=function(){var a;return a=null,a=i>0?new p.Marker({element:l.first()}):new m.api.Marker},j=a(d.lat),k=a(d.lng),o=b.$watch(function(){return{lat:j(b),lng:k(b)}},function(c){var e;return e=!!f.marker,f.marker||(f.marker=h()),f.marker.setPosition(new m.api.LatLng(c.lat,c.lng)),f.marker.setMap(m.map),b.$marker=f.marker,m.addMarker(f),!e&&"onAdd"in d?a(d.onAdd)(b):void 0},!0),b.$on("$destroy",function(){return o(),f.marker.setMap(null),m.removeMarker(f),"onRemove"in d?a(d.onRemove)(b):void 0})}}},k=function(b,c){return{restrict:"ACE",require:"^ngMap",transclude:!0,link:function(d,e,f,g,h){var i,j;return i=[],j=c(f.pan)(d)||!1,g[f.name||"infoWindow"]=function(c,e,f){var i;return null==f&&(f={}),i={scope:a.extend(d.$new(),f)},i.customWindow=new p.Window({position:new g.api.LatLng(c,e),content:h(i.scope,a.noop),pan:j}),i.scope.$on("$destroy",function(){return i.customWindow.close()}),b(function(){return i.customWindow.open(g.map)}),i}}}},c=function(b){var c;return c=function(a,b){return{tc:b.TOP_CENTER,tl:b.TOP_LEFT,tr:b.TOP_RIGHT,lt:b.LEFT_TOP,rt:b.RIGHT_TOP,lc:b.LEFT_CENTER,rc:b.RIGHT_CENTER,lb:b.LEFT_BOTTOM,rb:b.RIGHT_BOTTOM,bc:b.BOTTOM_CENTER,bl:b.BOTTOM_LEFT,br:b.BOTTOM_RIGHT}[a]},[function(){return{restrict:"ACE",require:"^ngMap",transclude:!0,scope:!0,link:function(d,e,f,g,h){var i;return i=a.element("<div>").append(h()),g.map.controls[c(b,g.api.ControlPosition)].push(i[0])}}}]},t.provider("$ngMaps",[n]).directive("ngMap",["$parse","$timeout",j]).directive("ngMapCenter",["$timeout",h]).directive("ngMapZoom",["$timeout",m]).directive("ngMapMarker",["$parse",l]).directive("ngMapLayer",["$timeout","$parse",k]).directive("ngMapTc",c("tc")).directive("ngMapTl",c("tl")).directive("ngMapTr",c("tr")).directive("ngMapLt",c("lt")).directive("ngMapRt",c("rt")).directive("ngMapLc",c("lc")).directive("ngMapRc",c("rc")).directive("ngMapLb",c("lb")).directive("ngMapRb",c("rb")).directive("ngMapBc",c("bc")).directive("ngMapBl",c("bl")).directive("ngMapBr",c("br"))}(window.angular)}).call(this);
//# sourceMappingURL=angular-maps.min.map